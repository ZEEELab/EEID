(this.webpackJsonpinfectious_matter_component=this.webpackJsonpinfectious_matter_component||[]).push([[0],{326:function(t,e,n){var a=n(230);function o(t){this.track_all_contacts=!0,this.state=void 0,this.body=t,this.interaction_callback=void 0,this.uuid=a(),this.viva_color=void 0,this.events=[],this.location=void 0,this.home=void 0,this.cohorts=[],this.color=void 0,this.home_state={},this.migrating=!1,this.masked=!1}o.prototype.add_body=function(t){this.body=t},o.prototype.register_interaction_callback=function(t){this.interaction_callback=t},o.prototype.handle_agent_contact=function(t){this.interaction_callback(t)},o.prototype.draw_mask=function(t,e){t.fillStyle="#FFFFFF",t.strokeStyle="#000000",t.lineWidth=1,t.fillRect(this.body.position.x-e,this.body.position.y,2*e,e-1),t.strokeRect(this.body.position.x-e,this.body.position.y,2*e,e-1),t.stroke()},t.exports=o},358:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=358},378:function(t,e,n){t.exports=n(502)},420:function(t,e,n){var a={name:"matter-collision-events",version:"0.1.5",for:"matter-js@^0.12.0",install:function(t){var e=t.Body.create;t.Body.create=function(){var t=e.apply(null,arguments);return t.onCollide=function(e){t._mceOC=e},t.onCollideEnd=function(e){t._mceOCE=e},t.onCollideActive=function(e){t._mceOCA=e},t},t.after("Engine.create",(function(){t.Events.on(this,"collisionStart",(function(e){e.pairs.map((function(e){t.Events.trigger(e.bodyA,"onCollide",{pair:e}),t.Events.trigger(e.bodyB,"onCollide",{pair:e}),e.bodyA._mceOC&&e.bodyA._mceOC(e),e.bodyB._mceOC&&e.bodyB._mceOC(e)}))})),t.Events.on(this,"collisionActive",(function(e){e.pairs.map((function(e){t.Events.trigger(e.bodyA,"onCollideActive",{pair:e}),t.Events.trigger(e.bodyB,"onCollideActive",{pair:e}),e.bodyA._mceOCA&&e.bodyA._mceOCA(e),e.bodyB._mceOCA&&e.bodyB._mceOCA(e)}))})),t.Events.on(this,"collisionEnd",(function(e){e.pairs.map((function(e){t.Events.trigger(e.bodyA,"onCollideEnd",{pair:e}),t.Events.trigger(e.bodyB,"onCollideEnd",{pair:e}),e.bodyA._mceOCE&&e.bodyA._mceOCE(e),e.bodyB._mceOCE&&e.bodyB._mceOCE(e)}))}))}))}};n(85).Plugin.register(a),t.exports.MatterCollisionEvents=a},424:function(t,e,n){var a=n(230);function o(t,e){return Math.random()*(e-t)+t}function i(t){this.name=t,this.uuid=a(),this.bounds=void 0,this.friction=.2,this.occupants=[],this.border_color=void 0}i.prototype.draw_borders=function(t,e){e=e&&this.border_color?e||this.border_color:"black";var n=this.bounds.max.x-this.bounds.min.x,a=this.bounds.max.y-this.bounds.min.y;t.beginPath(),t.rect(this.bounds.min.x-2,this.bounds.min.y-2,n+4,a+4),t.strokeStyle=e,t.lineWidth=2,t.stroke()},i.prototype.get_random_position=function(){return this.bounds?{x:o(this.bounds.min.x,this.bounds.max.x),y:o(this.bounds.min.y,this.bounds.max.y)}:{x:0,y:0}},i.prototype.remove_agent=function(t){this.occupants=this.occupants.filter((function(e){return e!==t})),t.location=void 0},i.prototype.set_bounds=function(t){this.bounds=t},i.prototype.migrate_to=function(t,e,n){this.remove_agent(e),t.add_agent(e),n&&n(e)},i.prototype.try_getting_random_residents=function(t){for(var e,n=[],a=0;a<t;a++){var o=(e=this.occupants)[Math.floor(e.length*Math.random())];o&&0==o.migrating&&n.push(o)}return n},i.prototype.add_agent=function(t){this.occupants.push(t),t.location=this},t.exports=i},425:function(t,e){function n(){this.members=[]}n.prototype.move_cohort=function(t,e){for(var n=0;n<this.members.length;n++){var a=this.members[n];a.location.migrate_to(t,a,e)}},n.prototype.send_cohort_home=function(t){for(var e=0;e<this.members.length;e++){var n=this.members[e];n.location.migrate_to(n.home,n,t)}},n.prototype.add_agent=function(t,e){this.members.push(t),t.cohorts.push(this),e&&e(t)},t.exports=n},426:function(t,e,n){var a=n(427),o=n(325);function i(){this.fast_queue=new a((function(t,e){return t.time<e.time}))}i.prototype.add_event=function(t,e){o(e.time&&e.callback),e.original_time=e.time,e.time+=t,this.fast_queue.add(e)},i.prototype.run_events_fired=function(t,e){for(var n=0;this.fast_queue.peek()&&this.fast_queue.peek().time<t&&n<e;){var a=this.fast_queue.poll();a.recurring&&this.add_event(t,{time:a.original_time,callback:a.callback,recurring:!0}),a.callback(),n+=1}},i.prototype.clear_events=function(){this.fast_queue=null,this.fast_queue=new a((function(t,e){return t.time<e.time}))},t.exports=i},502:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),i=n(15),r=n.n(i),s=n(28),c=n(348),_=n(528),u=n(347),l=n(529),m=n(88),d=n(121),p=n(230),f=function(t){var e=t.color_float+d.jStat.exponential.sample(8),n=Math.min(t.contagiousness+d.jStat.normal.sample(0,.1),1);e%=1,this.color_float=e,this.contagiousness=n};function h(t,e){this.parent=void 0,this.interaction_callback=void 0,this.uuid=p(),this.color_float=t||Math.random(),this.mutation_function=f,this.contagiousness=.5}h.prototype.get_offspring=function(t){var e=new h(this.color_float);return Math.random()<t&&this.mutation_function&&e.mutation_function(this),e};var g=h,y=n(85),b=(n(110),function(t){var e=t.InfectiousMatterRef,n=t.InfectiousMatterAPI,i=t.redraw_trigger,r=t.setWorldReadyTrigger,s=t.numMasked,c=t.popSize,_=Object(a.useRef)(null),u=function(t){var a=n(e,{type:"add_location",payload:{residence_props:{type:"residence",friction:.01,bounds:{min:{x:10,y:10},max:{x:390,y:390}}}}});n(e,{type:"add_agents",payload:{residence:a,num_agents:c}}),y.Common.shuffle(e.current.agents),n(e,{type:"set_num_mask",payload:{num_masked:t}}),console.log(t)};return Object(a.useEffect)((function(){var t={sim_time_per_day:1e3,agent_size:4,link_lifetime:200};t.link_lifetime=7*t.sim_time_per_day;console.log("initalizing matter"),e.current=new W(!1,t,{per_contact_infection:.5,incubation_period_mu:5,incubation_period_sigma:3,infectious_period_mu:7,infectious_period_sigma:4,fraction_asymptomatic:.2,asymptomatic_infectious_period_mu:1.5,asymptomatic_infectious_period_sigma:1.5,fraction_seek_care:.5,fraction_isolate:.2,time_to_seek_care:2.5,movement_scale:2},{viva_colors:[2846468607,16711935,4294902015,4289003775,65535,2846468607,4278255615,13554175,2566625535,3448061951],matter_colors:["darkgrey","lime","yellow","orange","blue","darkgrey","fuchsia","darkturquoise","palegreen","peru"]}),n(e,{type:"setup_environment",payload:{sim_div:_}}),u(s)}),[]),Object(a.useLayoutEffect)((function(){e.current&&(u(s),r((function(t){return t+1})))}),[i]),o.a.createElement("div",null,o.a.createElement("div",{ref:_,style:{height:400,width:400}}))}),v=n(85);n(419);var k=n(420).MatterCollisionEvents;v.use("matter-wrap",k),v._seed=2,Math.random=v.Common.random,d.jStat._random_fn=v.Common.random;var E=n(325),j=n(110),C=new j.Graph.graph,O=n(424),x=n(425),w=n(426),S=n(326),I=n(429),A=(I({colormap:"chlorophyll",nshades:9,format:"hex",alpha:1}),I({colormap:"portland",nshades:15,format:"hex",alpha:1}),n(431)(["white"])),M={SUSCEPTIBLE:0,INFECTED:1,RECOVERED:2,size:3},B=v.Engine,R=v.Render,L=v.World,D=(v.Body,v.Bodies),N=(v.Bounds,v.Mouse),P=v.MouseConstraint,q=v.Events,z={sim_time_per_day:2e3,agent_size:3,link_lifetime:4e3,pathogen_mut_prob:.1},F={per_contact_infection:.5,incubation_period_mu:5,incubation_period_sigma:3,infectious_period_mu:7,infectious_period_sigma:4,fraction_asymptomatic:.2,asymptomatic_infectious_period_mu:1.5,asymptomatic_infectious_period_sigma:1.5,fraction_seek_care:.5,fraction_isolate:.2,time_to_seek_care:2.5,movement_scale:.2,use_pathogen_contagiousness:!1},T={viva_colors:[2332068863,16711935,4294902015,4289003775,65535,2846468607,4278255615,13554175,2566625535,3448061951],matter_colors:["darkmagenta","lime","yellow","orange","blue","darkgrey","fuchsia","darkturquoise","palegreen","peru"]};function W(t,e,n,a){this.simulation_params=v.Common.extend(z,e),this.infection_params=v.Common.extend(F,n),this.simulation_colors=v.Common.extend(T,a),this.matter_world=L.create(),this.headless=t||!1,this.pathogen_color_range=A,console.log("creating infectious matter environment!"),this.matter_engine=B.create({positionIterations:15,velocityIterations:15,constraintIterations:10}),this.matter_engine.world.gravity.y=0,this.event_queue=new w,this.migration_graph=new j.Graph.graph}W.prototype.setup_renderer=function(t){var e=t;this.matter_render=R.create({element:e,engine:this.matter_engine,options:{height:e.offsetHeight,width:e.offsetWidth,background:"rgba(229,229,229)",wireframes:!1}});var n=N.create(this.matter_render.canvas);this.mouseConstraint=P.create(this.matter_engine,{mouse:n,constraint:{stiffness:.1,render:{visible:!0}}}),n.element.removeEventListener("mousewheel",n.mousewheel),n.element.removeEventListener("DOMMouseScroll",n.mousewheel),this.matter_render.mouse=n,L.add(this.matter_engine.world,this.mouseConstraint),R.run(this.matter_render),B.run(this.matter_engine)},W.prototype.run_headless=function(t){if(t=t||30,this.run_headless)for(var e=0;e<t*this.simulation_params.sim_time_per_day;e++){this.event_queue.run_events_fired(this.cur_sim_time,500);v.Common.choose(this.agents);B.update(this.matter_engine,1e3/60),this.cur_sim_time=this.matter_engine.timing.timestamp}},W.prototype.setup_matter_env=function(){var t=this;C.clear(),this.locations=[],this.migration_graph.clear(),this.location_uuid_hash={},this.agents=[],this.cohorts=[],this.cur_sim_time=0,this.state_counts=[],this.matter_engine.timing.timestamp=0;for(var e=0;e<M.size;e++)this.state_counts.push(0);this.headless||(q.on(this.matter_render,"beforeRender",(function(e){t.cur_sim_time=e.timestamp,t.event_queue.run_events_fired(t.cur_sim_time,500)})),q.on(this.matter_render,"afterRender",(function(e){var n=t.matter_render.context;if(n){for(var a=0;a<t.locations.length;a++)t.locations[a].draw_borders(n);t.agents.forEach((function(e){e.masked&&e.draw_mask(n,t.simulation_params.agent_size)}))}}))),this.add_event({time:100,callback:this.pulse_orgs_event(),recurring:!0})},W.prototype.update_org_state=function(t,e){var n=t.agent_object.state;t.agent_object.state=e,"undefined"!==typeof n&&(this.state_counts[n]-=1),this.state_counts[e]+=1,t.render.lineWidth=3;var a=t.render.strokeStyle;switch(e){case M.INFECTED:a="red",4278190335;break;case M.RECOVERED:a="blue",4294967295;break;case M.SENSITIVE:a="black",t.render.lineWidth=0}return t.render.strokeStyle=a,t},W.prototype.add_location=function(t,e){var n=new O(t);return n.border_color=e.border_color,n.set_bounds(e.bounds),n.friction=e.friction,n.type=e.type||"none",n.home_color=this.simulation_colors.matter_colors[this.locations.length],n.viva_node_color=this.simulation_colors.viva_colors[this.locations.length],this.locations.push(n),this.location_uuid_hash[n.uuid]=n,n},W.prototype.add_cohort=function(){var t=new x;return this.cohorts.push(t),t},W.prototype.assign_cohort=function(t,e){e.add_agent(t.agent_object)},W.prototype.expose_org=function(t,e,n){var a=this;n&&n.pathogen?t.agent_object.pathogen=n.pathogen.get_offspring(this.simulation_params.pathogen_mut_prob):t.agent_object.pathogen=new g(.5,"root"),this.update_org_state(t,M.INFECTED),this.post_infection_callback&&this.post_infection_callback(t.agent_object,n);var o=Math.max(d.jStat.exponential.sample(1/this.infection_params.infectious_period_mu),3);this.add_event({time:o*this.simulation_params.sim_time_per_day,callback:function(){a.update_org_state(t,M.RECOVERED)}})},W.prototype.register_infection_callback=function(t){this.post_infection_callback=t},W.prototype._check_edge_for_removal=function(t){var e=this;return function(){t.data.timestamp<e.cur_sim_time-e.simulation_params.link_lifetime?C.removeLink(t):e.add_event({time:e.cur_sim_time+e.simulation_params.link_lifetime-t.data.timestamp,callback:e._check_edge_for_removal(t)})}},W.prototype.calc_prob_infection=function(t,e){return this.infection_params.per_contact_infection},W.prototype._default_interaction_callback=function(t){var e=this;return function(n){n.state==M.INFECTED&&t.agent_object.state==M.SUSCEPTIBLE&&v.Common.random(0,1)<e.calc_prob_infection(t,n.body)&&e.expose_org(t,M.INFECTED,n),E(n.uuid&&t.agent_object.uuid);var a=C.hasLink(t.agent_object.uuid,n.uuid)||C.hasLink(n.uuid,t.agent_object.uuid);a?a.data.timestamp=e.cur_sim_time:(E(C.hasNode(t.agent_object.uuid)&&C.hasNode(t.agent_object.uuid)),a=C.addLink(t.agent_object.uuid,n.uuid,{origin:t.agent_object.uuid,timestamp:e.cur_sim_time}),e.add_event({time:e.simulation_params.link_lifetime+1,callback:e._check_edge_for_removal(a)}))}},W.prototype.add_agent=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.SUSCEPTIBLE;E(t&&t.get_random_position);var n=t.get_random_position(),a=D.circle(n.x,n.y,this.simulation_params.agent_size,{plugin:{wrap:t.bounds}});return a.render.fillStyle=t.home_color||"black",a.strokeStyle="black",a.lineWidth=2,a.agent_object=new S(a),a.frictionAir=t.friction,a.friction=0,a.restitution=1.1,a.node=C.addNode(a.agent_object.uuid,{something:!0}),a.agent_object.home=t,a.agent_object.viva_color=t.viva_node_color,t.add_agent(a.agent_object),a.agent_object.register_interaction_callback(this._default_interaction_callback(a,this.get_prob_of_infection)),a.onCollide((function(t){t.bodyA===a&&t.bodyB.agent_object?t.bodyA.agent_object.handle_agent_contact(t.bodyB.agent_object):t.bodyB===a&&t.bodyA.agent_object&&t.bodyB.agent_object.handle_agent_contact(t.bodyA.agent_object)})),L.add(this.matter_engine.world,a),this.agents.push(a.agent_object),this.update_org_state(a,e),a},W.prototype.delete_agent=function(t){this.agents=this.agents.filter((function(e){return e!==t})),v.Composite.remove(this.matter_engine.world,t.body),C.removeNode(t.uuid),this.state_counts[t.state]-=1},W.prototype.add_event=function(t){E(t.time&&t.callback),this.event_queue.add_event(this.cur_sim_time,t)},W.prototype.set_agent_contact_callback=function(t){this.agent_contact_callback=t},W.prototype.clear_simulator=function(){L.clear(this.matter_engine.world),B.clear(this.matter_engine),this.event_queue.clear_events()},W.prototype.remove_simulator=function(){this.clear_simulator(),R.stop(),this.matter_engine.events={},this.matter_render.canvas.remove(),this.matter_render.canvas=null,this.matter_render.context=null,this.matter_render.textures={},this.matter_world=null,this.matter_engine=null,this.event_queue=null,this.matter_render=null,this.mouseConstraint=null},W.prototype.pulse_orgs_event=function(){var t=this;return function(){if(t.agents.length>0)for(var e=0;e<100;e++){var n=v.Common.choose(t.agents);v.Body.applyForce(n.body,n.body.position,{x:v.Common.random(-2e-5*t.infection_params.movement_scale,2e-5*t.infection_params.movement_scale),y:v.Common.random(-2e-5*t.infection_params.movement_scale,2e-5*t.infection_params.movement_scale)})}}},W.prototype.get_migration_links=function(){var t=[];return this.migration_graph.forEachLink((function(e){t.push({from_uuid:e.fromId,to_uuid:e.toId,num_agents:e.data.num_agents})})),t},W.prototype.add_migration_link=function(t,e,n){var a=this.migration_graph.hasLink(t,e);a?a.data.num_agents=n:this.migration_graph.addLink(t,e,{num_agents:n})},W.prototype.remove_migration_link=function(t,e){var n=this.migration_graph.hasLink(t,e);n&&this.migration_graph.removeLink(n)},W.prototype.new_migration_event=function(){var t=this;return function(){t.migration_graph.forEachLink((function(e){var n=t.location_uuid_hash[e.fromId],a=t.location_uuid_hash[e.toId];n.try_getting_random_residents(e.data.num_agents).forEach((function(e){e.home_state={location:n,position:Object(m.a)({},e.body.position),velocity:Object(m.a)({},e.body.velocity)},n.migrate_to(a,e,(function(t){t.body.plugin.wrap=a.bounds,v.Body.setPosition(t.body,a.get_random_position()),t.body.frictionAir=a.friction,t.migrating=!0})),t.add_event({time:t.simulation_params.sim_time_per_day,callback:function(){a.migrate_to(n,e,(function(t){v.Body.setPosition(t.body,e.home_state.position),t.body.plugin.wrap=n.bounds,v.Body.setVelocity(t.body,e.home_state.velocity),t.body.frictionAir=n.friction,t.migrating=!1}))}})}))}))}};n(326);var V=n(110),G=n.n(V),U=(G.a.Graph.Layout.forceDirected(C,{springLength:15,springCoeff:5e-5,dragCoeff:.01,gravity:-1.5}),G.a.Graph.View.webglGraphics(),n(148));n(183);var H=n(369),J=n.n(H),K={margin:{l:50,r:10,b:50,t:10,pad:10},showlegend:!0,legend:{x:1,xanchor:"right",y:1},xaxis:{title:"Days",rangemode:"nonnegative"},yaxis:{title:"Count",rangemode:"nonnegative"},width:390,height:390},Q=[{x:[0],y:[0],stackgroup:"one",type:"scattergl",name:"Infected",marker:{color:"red"}},{x:[0],y:[0],stackgroup:"one",name:"Recovered",type:"scattergl",marker:{color:"blue"}},{x:[0],y:[0],stackgroup:"one",name:"Susceptible",type:"scattergl",marker:{color:"grey"}}];function X(t,e){t||console.log("didnt get state");var n=Object(U.a)(t);switch(e.type){case"extend":return n[0].x.push(e.payload.cur_time),n[0].y.push(e.payload.cur_state_counts[M.INFECTED]),n[1].x.push(e.payload.cur_time),n[1].y.push(e.payload.cur_state_counts[M.RECOVERED]),n[2].x.push(e.payload.cur_time),n[2].y.push(e.payload.cur_state_counts[M.SUSCEPTIBLE]),n;case"reset":return n=[{x:[0],y:[0],stackgroup:"one",type:"scattergl",name:"Infected",marker:{color:"red"}},{x:[0],y:[0],stackgroup:"one",name:"Recovered",type:"scattergl",marker:{color:"blue"}},{x:[0],y:[0],stackgroup:"one",name:"Susceptible",type:"scattergl",marker:{color:"grey"}}]}}var Y=function(t){var e=t.InfectiousMatterRef,n=t.InfectiousMatterAPI,i=t.redraw_trigger,r=Object(a.useReducer)(X,Q),c=Object(s.a)(r,2),_=c[0],u=c[1],l=Object(a.useState)(0),d=Object(s.a)(l,2),p=d[0],f=d[1],h=K;return Object(a.useEffect)((function(){var t=setInterval((function(){!function(){var t=n(e,{type:"get_state_counts"});u({type:"extend",payload:{cur_time:t.cur_time,cur_state_counts:t.state_counts}}),f((function(t){return t+1}))}()}),600);return function(){clearInterval(t)}}),[i]),Object(a.useLayoutEffect)((function(){e.current&&(u({type:"reset"}),f((function(t){return t+1})))}),[i]),o.a.createElement(J.a,{data:_,layout:Object(m.a)(Object(m.a)({},h),{},{datarevision:p})})},Z=n(85),$=n.n(Z),tt=n(532),et=n(510),nt=n(504),at=n(352),ot=n(530),it=Object(u.a)((function(t){return{root:{flexGrow:0,minWidth:1200},controlls:{width:600},paper:{minHeight:400,minWidth:400,textAlign:"center"},paperControlls:{minHeight:400,minWidth:800,textAlign:"center",padding:t.spacing(2)}}}));W.prototype.mask_transmission_props={self_protection:.05,others_protection:.5},W.prototype.calc_prob_infection=function(t,e){var n=this.infection_params.per_contact_infection;return t.agent_object.masked&&e.agent_object.masked?n*(1-this.mask_transmission_props.self_protection)*(1-this.mask_transmission_props.others_protection):t.agent_object.masked&&!e.agent_object.masked?n*(1-this.mask_transmission_props.self_protection):!t.agent_object.masked&&e.agent_object.masked?n*(1-this.mask_transmission_props.others_protection):t.agent_object.masked||e.agent_object.masked?void 0:n};var rt=function t(e,n){if("setup_environment"==n.type&&(e.current.setup_renderer(n.payload.sim_div.current),e.current.setup_matter_env()),"update_infection_params"==n.type&&(n.payload.per_contact_infection&&(e.current.infection_params.per_contact_infection=n.payload.per_contact_infection),n.payload.infectious_period_mu&&(e.current.infection_params.infectious_period_mu=n.payload.infectious_period_mu)),"update_mask_transmission_params"==n.type&&(n.payload.self_protection&&(e.current.mask_transmission_props.self_protection=n.payload.self_protection),n.payload.others_protection&&(e.current.mask_transmission_props.others_protection=n.payload.others_protection)),"update_movement_scale"==n.type&&n.payload.movement_scale&&(e.current.infection_params.movement_scale=n.payload.movement_scale),"reset_simulator"==n.type&&(e.current.clear_simulator(),e.current.setup_matter_env()),"add_location"==n.type)return e.current.add_location("residence",n.payload.residence_props);if("add_random_agent"==n.type){var a=$.a.Common.choose(e.current.locations),o=e.current.add_agent(a);n.payload&&n.payload.callback&&o&&n.payload.callback(o.agent_object)}if("remove_random_agent"==n.type){var i=$.a.Common.choose(e.current.agents);e.current.delete_agent(i)}if("add_agents"==n.type){var r=null;if(n.payload.residence&&n.payload.num_agents)for(var s=0;s<n.payload.num_agents;s++)r=e.current.add_agent(n.payload.residence);n.payload.callback&&r&&n.payload.callback(r.agent_object)}if("map_agents"==n.type)return e.current.agents.map((function(t,e){return n.payload.callback(t,e)}));if("forEach_agents"==n.type&&e.current.agents.forEach((function(t){return n.payload.callback(t)})),"map_locations"==n.type)return e.current.locations.map((function(t,e){return n.payload.callback(t,e)}));if("forEach_location"==n.type&&e.current.locations.forEach((function(t){return n.payload.callback(t)})),"infect_random_agents"==n.type&&n.payload.num_agents)for(var c=0;c<n.payload.num_agents;c++){var _=$.a.Common.choose(e.current.agents);e.current.expose_org(_.body,M.INFECTED)}if("get_migration_links"==n.type)return e.current.get_migration_links();if("add_migration_link"==n.type&&e.current.add_migration_link(n.payload.from_location,n.payload.to_location,n.payload.num_agents),"clear_migration_links"==n.type&&e.current.migration_graph.clear(),"remove_migration_link"==n.type&&e.current.remove_migration_link(n.payload.from_location,n.payload.to_location),"get_state_counts"==n.type)return{state_counts:e.current.state_counts,cur_time:e.current.cur_sim_time/e.current.simulation_params.sim_time_per_day};if("set_num_mask"==n.type){var u=[],l=[];e.current.agents.forEach((function(t){t.masked?u.push(t):l.push(t)}));var m=u.length,d=n.payload.num_masked-m;if(d>0)for(var p=0;p<d;p++)l[p].masked=!0;else if(d<0)for(var f=0;f<-d;f++)u[f].masked=!1}if("set_pop_size"==n.type){var h=n.payload.pop_size-e.current.agents.length;if(h>0)for(var g=0;g<h;g++)t(e,{type:"add_random_agent"});else if(h<0)for(var y=0;y<-h;y++)t(e,{type:"remove_random_agent"})}},st=function(t){var e=it(),n=Object(a.useRef)(null),i=Object(a.useState)(0),r=Object(s.a)(i,2),u=r[0],m=(r[1],Object(a.useState)(500)),d=Object(s.a)(m,2),p=d[0],f=d[1],h=Object(a.useState)(.05),g=Object(s.a)(h,2),y=g[0],v=(g[1],Object(a.useState)(.5)),k=Object(s.a)(v,2),E=k[0],j=(k[1],Object(a.useState)(2)),C=Object(s.a)(j,2),O=C[0],x=C[1],w=Object(a.useState)(.5),S=Object(s.a)(w,2),I=S[0],A=S[1],M=Object(a.useState)(5),B=Object(s.a)(M,2),R=B[0],L=B[1],D=Object(a.useState)(0),N=Object(s.a)(D,2),P=N[0],q=N[1],z=Object(a.useState)(0),F=Object(s.a)(z,2),T=(F[0],F[1]);return Object(a.useEffect)((function(){rt(n,{type:"update_infection_params",payload:{per_contact_infection:I}})}),[I]),Object(a.useEffect)((function(){rt(n,{type:"update_infection_params",payload:{infectious_period_mu:R}})}),[R]),Object(a.useEffect)((function(){rt(n,{type:"update_mask_transmission_params",payload:{self_protection:y}})}),[y]),Object(a.useEffect)((function(){rt(n,{type:"update_mask_transmission_params",payload:{others_protection:E}})}),[E]),Object(a.useEffect)((function(){rt(n,{type:"update_movement_scale",payload:{movement_scale:O}})}),[O]),Object(a.useEffect)((function(){rt(n,{type:"set_num_mask",payload:{num_masked:u}})}),[u]),Object(a.useEffect)((function(){rt(n,{type:"set_pop_size",payload:{pop_size:p}}),T((function(t){return t+1}))}),[p]),o.a.createElement("div",{className:"App"},o.a.createElement(_.a,{container:!0,direction:"row",justify:"center",className:e.root,spacing:3},o.a.createElement(_.a,{item:!0},o.a.createElement(l.a,{className:e.paper},o.a.createElement(Y,{InfectiousMatterRef:n,InfectiousMatterAPI:rt,redraw_trigger:P}))),o.a.createElement(_.a,{item:!0},o.a.createElement(l.a,{className:e.paper},o.a.createElement(b,{InfectiousMatterRef:n,InfectiousMatterAPI:rt,redraw_trigger:P,setWorldReadyTrigger:T,numMasked:u,popSize:p})))),o.a.createElement(_.a,{container:!0,direction:"row",justify:"center",className:e.root,spacing:10},o.a.createElement(_.a,{item:!0,alignItems:"flex-start"},o.a.createElement(l.a,{className:e.paperControlls},o.a.createElement(et.a,null,o.a.createElement(ot.a,{disableSticky:!0},"World Settings"),o.a.createElement(nt.a,null,o.a.createElement(at.a,{id:"PopSize",primary:"Pop Size"}),o.a.createElement(tt.a,{value:p,"aria-labelledby":"discrete-slider",valueLabelDisplay:"on",onChange:function(t,e){f(e)},step:1,min:0,max:800})),o.a.createElement(nt.a,null,o.a.createElement(at.a,{id:"Movement",primary:"Movement Scale"}),o.a.createElement(tt.a,{value:O,"aria-labelledby":"discrete-slider",valueLabelDisplay:"on",onChange:function(t,e){x(e)},step:.25,min:0,max:10})),o.a.createElement(nt.a,null,o.a.createElement(_.a,{container:!0,direction:"row",spacing:3},o.a.createElement(_.a,{item:!0},o.a.createElement(c.a,{variant:"contained",onClick:function(t){rt(n,{type:"reset_simulator"}),q((function(t){return t+1}))}},"Reset")),o.a.createElement(_.a,{item:!0},o.a.createElement(c.a,{variant:"contained",onClick:function(t){rt(n,{type:"infect_random_agents",payload:{num_agents:1}})}},"Infect Random Agent")))),o.a.createElement(ot.a,{disableSticky:!0},"Infection Settings"),o.a.createElement(nt.a,null,o.a.createElement(at.a,{id:"infectionRate",primary:"Prob. Infection"}),o.a.createElement(tt.a,{value:I,"aria-labelledby":"continuous-slider",onChange:function(t,e){A(e)},valueLabelDisplay:"on",min:0,max:1,step:.01})),o.a.createElement(nt.a,null,o.a.createElement(at.a,{id:"infectiousPeriod",primary:"Mean Infectious Period"}),o.a.createElement(tt.a,{value:R,"aria-labelledby":"continuous-slider",onChange:function(t,e){L(e)},valueLabelDisplay:"on",min:3,max:12,step:.1})))))))};r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(st,null)),document.getElementById("root"))}},[[378,1,2]]]);
//# sourceMappingURL=main.25864b45.chunk.js.map