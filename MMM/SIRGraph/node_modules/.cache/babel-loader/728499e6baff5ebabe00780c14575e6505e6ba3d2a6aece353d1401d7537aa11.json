{"ast":null,"code":"/**\n * Represents spring force, which updates forces acting on two bodies, conntected\n * by a spring.\n *\n * @param {Object} options for the spring force\n * @param {Number=} options.springCoeff spring force coefficient.\n * @param {Number=} options.springLength desired length of a spring at rest.\n */\nmodule.exports = function (options) {\n  var merge = require('ngraph.merge');\n  var random = require('ngraph.random').random(42);\n  var expose = require('ngraph.expose');\n  options = merge(options, {\n    springCoeff: 0.0002,\n    springLength: 80\n  });\n  var api = {\n    /**\n     * Upsates forces acting on a spring\n     */\n    update: function (spring) {\n      var body1 = spring.from,\n        body2 = spring.to,\n        length = spring.length < 0 ? options.springLength : spring.length,\n        dx = body2.pos.x - body1.pos.x,\n        dy = body2.pos.y - body1.pos.y,\n        r = Math.sqrt(dx * dx + dy * dy);\n      if (r === 0) {\n        dx = (random.nextDouble() - 0.5) / 50;\n        dy = (random.nextDouble() - 0.5) / 50;\n        r = Math.sqrt(dx * dx + dy * dy);\n      }\n      var d = r - length;\n      var coeff = (!spring.coeff || spring.coeff < 0 ? options.springCoeff : spring.coeff) * d / r * spring.weight;\n      body1.force.x += coeff * dx;\n      body1.force.y += coeff * dy;\n      body2.force.x -= coeff * dx;\n      body2.force.y -= coeff * dy;\n    }\n  };\n  expose(options, api, ['springCoeff', 'springLength']);\n  return api;\n};","map":{"version":3,"names":["module","exports","options","merge","require","random","expose","springCoeff","springLength","api","update","spring","body1","from","body2","to","length","dx","pos","x","dy","y","r","Math","sqrt","nextDouble","d","coeff","weight","force"],"sources":["/Users/zamanlh/github/MMM_Worksheets/networksir/node_modules/ngraph.physics.simulator/lib/springForce.js"],"sourcesContent":["/**\n * Represents spring force, which updates forces acting on two bodies, conntected\n * by a spring.\n *\n * @param {Object} options for the spring force\n * @param {Number=} options.springCoeff spring force coefficient.\n * @param {Number=} options.springLength desired length of a spring at rest.\n */\nmodule.exports = function (options) {\n  var merge = require('ngraph.merge');\n  var random = require('ngraph.random').random(42);\n  var expose = require('ngraph.expose');\n\n  options = merge(options, {\n    springCoeff: 0.0002,\n    springLength: 80\n  });\n\n  var api = {\n    /**\n     * Upsates forces acting on a spring\n     */\n    update : function (spring) {\n      var body1 = spring.from,\n          body2 = spring.to,\n          length = spring.length < 0 ? options.springLength : spring.length,\n          dx = body2.pos.x - body1.pos.x,\n          dy = body2.pos.y - body1.pos.y,\n          r = Math.sqrt(dx * dx + dy * dy);\n\n      if (r === 0) {\n          dx = (random.nextDouble() - 0.5) / 50;\n          dy = (random.nextDouble() - 0.5) / 50;\n          r = Math.sqrt(dx * dx + dy * dy);\n      }\n\n      var d = r - length;\n      var coeff = ((!spring.coeff || spring.coeff < 0) ? options.springCoeff : spring.coeff) * d / r * spring.weight;\n\n      body1.force.x += coeff * dx;\n      body1.force.y += coeff * dy;\n\n      body2.force.x -= coeff * dx;\n      body2.force.y -= coeff * dy;\n    }\n  };\n\n  expose(options, api, ['springCoeff', 'springLength']);\n  return api;\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,MAAM,CAACC,OAAO,GAAG,UAAUC,OAAO,EAAE;EAClC,IAAIC,KAAK,GAAGC,OAAO,CAAC,cAAc,CAAC;EACnC,IAAIC,MAAM,GAAGD,OAAO,CAAC,eAAe,CAAC,CAACC,MAAM,CAAC,EAAE,CAAC;EAChD,IAAIC,MAAM,GAAGF,OAAO,CAAC,eAAe,CAAC;EAErCF,OAAO,GAAGC,KAAK,CAACD,OAAO,EAAE;IACvBK,WAAW,EAAE,MAAM;IACnBC,YAAY,EAAE;EAChB,CAAC,CAAC;EAEF,IAAIC,GAAG,GAAG;IACR;AACJ;AACA;IACIC,MAAM,EAAG,SAAAA,CAAUC,MAAM,EAAE;MACzB,IAAIC,KAAK,GAAGD,MAAM,CAACE,IAAI;QACnBC,KAAK,GAAGH,MAAM,CAACI,EAAE;QACjBC,MAAM,GAAGL,MAAM,CAACK,MAAM,GAAG,CAAC,GAAGd,OAAO,CAACM,YAAY,GAAGG,MAAM,CAACK,MAAM;QACjEC,EAAE,GAAGH,KAAK,CAACI,GAAG,CAACC,CAAC,GAAGP,KAAK,CAACM,GAAG,CAACC,CAAC;QAC9BC,EAAE,GAAGN,KAAK,CAACI,GAAG,CAACG,CAAC,GAAGT,KAAK,CAACM,GAAG,CAACG,CAAC;QAC9BC,CAAC,GAAGC,IAAI,CAACC,IAAI,CAACP,EAAE,GAAGA,EAAE,GAAGG,EAAE,GAAGA,EAAE,CAAC;MAEpC,IAAIE,CAAC,KAAK,CAAC,EAAE;QACTL,EAAE,GAAG,CAACZ,MAAM,CAACoB,UAAU,EAAE,GAAG,GAAG,IAAI,EAAE;QACrCL,EAAE,GAAG,CAACf,MAAM,CAACoB,UAAU,EAAE,GAAG,GAAG,IAAI,EAAE;QACrCH,CAAC,GAAGC,IAAI,CAACC,IAAI,CAACP,EAAE,GAAGA,EAAE,GAAGG,EAAE,GAAGA,EAAE,CAAC;MACpC;MAEA,IAAIM,CAAC,GAAGJ,CAAC,GAAGN,MAAM;MAClB,IAAIW,KAAK,GAAG,CAAE,CAAChB,MAAM,CAACgB,KAAK,IAAIhB,MAAM,CAACgB,KAAK,GAAG,CAAC,GAAIzB,OAAO,CAACK,WAAW,GAAGI,MAAM,CAACgB,KAAK,IAAID,CAAC,GAAGJ,CAAC,GAAGX,MAAM,CAACiB,MAAM;MAE9GhB,KAAK,CAACiB,KAAK,CAACV,CAAC,IAAIQ,KAAK,GAAGV,EAAE;MAC3BL,KAAK,CAACiB,KAAK,CAACR,CAAC,IAAIM,KAAK,GAAGP,EAAE;MAE3BN,KAAK,CAACe,KAAK,CAACV,CAAC,IAAIQ,KAAK,GAAGV,EAAE;MAC3BH,KAAK,CAACe,KAAK,CAACR,CAAC,IAAIM,KAAK,GAAGP,EAAE;IAC7B;EACF,CAAC;EAEDd,MAAM,CAACJ,OAAO,EAAEO,GAAG,EAAE,CAAC,aAAa,EAAE,cAAc,CAAC,CAAC;EACrD,OAAOA,GAAG;AACZ,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}