{"ast":null,"code":"let FastPriorityQueue = require('fastpriorityqueue');\nlet assert = require('assert');\nfunction EventQueue() {\n  this.fast_queue = new FastPriorityQueue(function (a, b) {\n    return a.time < b.time;\n  });\n}\n_c = EventQueue;\n;\nEventQueue.prototype.add_event = function (cur_sim_time, q_event) {\n  assert(q_event.time && q_event.callback);\n  q_event.original_time = q_event.time;\n  q_event.time += cur_sim_time;\n  this.fast_queue.add(q_event);\n};\nEventQueue.prototype.run_events_fired = function (cur_sim_time, event_limit) {\n  let num_events = 0;\n  while (this.fast_queue.peek() && this.fast_queue.peek().time < cur_sim_time && num_events < event_limit) {\n    var this_event = this.fast_queue.poll();\n    if (this_event.stale == false) {\n      if (this_event.recurring) {\n        this.add_event(cur_sim_time, {\n          time: this_event.original_time,\n          callback: this_event.callback,\n          recurring: true,\n          stale: false\n        });\n      }\n      this_event.callback();\n      num_events += 1;\n    }\n  }\n};\nEventQueue.prototype.clear_events = function () {\n  this.fast_queue = null;\n  this.fast_queue = new FastPriorityQueue(function (a, b) {\n    return a.time < b.time;\n  });\n};\nmodule.exports = {\n  EventQueue\n};\nvar _c;\n$RefreshReg$(_c, \"EventQueue\");","map":{"version":3,"names":["FastPriorityQueue","require","assert","EventQueue","fast_queue","a","b","time","_c","prototype","add_event","cur_sim_time","q_event","callback","original_time","add","run_events_fired","event_limit","num_events","peek","this_event","poll","stale","recurring","clear_events","module","exports","$RefreshReg$"],"sources":["/Users/zamanlh/github/MMM_Worksheets/networksir/src/event_queue.js"],"sourcesContent":["let FastPriorityQueue = require('fastpriorityqueue');\nlet assert = require('assert');\n\n\nfunction EventQueue() {\n\tthis.fast_queue = new FastPriorityQueue(function(a,b) {\n\t\treturn a.time < b.time;\n\t});\n};\n\nEventQueue.prototype.add_event = function(cur_sim_time, q_event) {\n\tassert(q_event.time && q_event.callback);\n\tq_event.original_time = q_event.time;\n\tq_event.time += cur_sim_time;\n\tthis.fast_queue.add(q_event);\n};\n\nEventQueue.prototype.run_events_fired = function(cur_sim_time, event_limit) {\n\tlet num_events = 0;\n\twhile (this.fast_queue.peek() && this.fast_queue.peek().time < cur_sim_time && num_events < event_limit){\n\t\tvar this_event = this.fast_queue.poll();\n\n\t\tif (this_event.stale == false) {\n\t\t\tif (this_event.recurring) {\n\t\t\t\tthis.add_event(cur_sim_time, {time:this_event.original_time, callback:this_event.callback, recurring:true, stale:false});\n\t\t\t}\n\t\t\tthis_event.callback();\n\t\t\tnum_events += 1;\n\t\t}\n\t}\n};\n\nEventQueue.prototype.clear_events = function() {\n\tthis.fast_queue = null;\n\tthis.fast_queue = new FastPriorityQueue(function(a,b) {\n\t\treturn a.time < b.time;\n\t});\n};\n\n\n\nmodule.exports = {EventQueue};"],"mappings":"AAAA,IAAIA,iBAAiB,GAAGC,OAAO,CAAC,mBAAmB,CAAC;AACpD,IAAIC,MAAM,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAG9B,SAASE,UAAUA,CAAA,EAAG;EACrB,IAAI,CAACC,UAAU,GAAG,IAAIJ,iBAAiB,CAAC,UAASK,CAAC,EAACC,CAAC,EAAE;IACrD,OAAOD,CAAC,CAACE,IAAI,GAAGD,CAAC,CAACC,IAAI;EACvB,CAAC,CAAC;AACH;AAACC,EAAA,GAJQL,UAAU;AAIlB;AAEDA,UAAU,CAACM,SAAS,CAACC,SAAS,GAAG,UAASC,YAAY,EAAEC,OAAO,EAAE;EAChEV,MAAM,CAACU,OAAO,CAACL,IAAI,IAAIK,OAAO,CAACC,QAAQ,CAAC;EACxCD,OAAO,CAACE,aAAa,GAAGF,OAAO,CAACL,IAAI;EACpCK,OAAO,CAACL,IAAI,IAAII,YAAY;EAC5B,IAAI,CAACP,UAAU,CAACW,GAAG,CAACH,OAAO,CAAC;AAC7B,CAAC;AAEDT,UAAU,CAACM,SAAS,CAACO,gBAAgB,GAAG,UAASL,YAAY,EAAEM,WAAW,EAAE;EAC3E,IAAIC,UAAU,GAAG,CAAC;EAClB,OAAO,IAAI,CAACd,UAAU,CAACe,IAAI,EAAE,IAAI,IAAI,CAACf,UAAU,CAACe,IAAI,EAAE,CAACZ,IAAI,GAAGI,YAAY,IAAIO,UAAU,GAAGD,WAAW,EAAC;IACvG,IAAIG,UAAU,GAAG,IAAI,CAAChB,UAAU,CAACiB,IAAI,EAAE;IAEvC,IAAID,UAAU,CAACE,KAAK,IAAI,KAAK,EAAE;MAC9B,IAAIF,UAAU,CAACG,SAAS,EAAE;QACzB,IAAI,CAACb,SAAS,CAACC,YAAY,EAAE;UAACJ,IAAI,EAACa,UAAU,CAACN,aAAa;UAAED,QAAQ,EAACO,UAAU,CAACP,QAAQ;UAAEU,SAAS,EAAC,IAAI;UAAED,KAAK,EAAC;QAAK,CAAC,CAAC;MACzH;MACAF,UAAU,CAACP,QAAQ,EAAE;MACrBK,UAAU,IAAI,CAAC;IAChB;EACD;AACD,CAAC;AAEDf,UAAU,CAACM,SAAS,CAACe,YAAY,GAAG,YAAW;EAC9C,IAAI,CAACpB,UAAU,GAAG,IAAI;EACtB,IAAI,CAACA,UAAU,GAAG,IAAIJ,iBAAiB,CAAC,UAASK,CAAC,EAACC,CAAC,EAAE;IACrD,OAAOD,CAAC,CAACE,IAAI,GAAGD,CAAC,CAACC,IAAI;EACvB,CAAC,CAAC;AACH,CAAC;AAIDkB,MAAM,CAACC,OAAO,GAAG;EAACvB;AAAU,CAAC;AAAC,IAAAK,EAAA;AAAAmB,YAAA,CAAAnB,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}